# Word星辉点 - 客户部署包

## 🚀 快速部署指南

这个部署包包含了运行 Word星辉点 所需的所有文件，无需下载完整源代码。

### 📋 部署包内容

```
客户部署包/
├── docker-compose.yml    # Docker 编排文件
├── .env.example         # 环境变量模板
├── update.sh           # 更新脚本
└── 部署说明.md          # 本文档
```

### 🛠️ 系统要求

- Docker 20.10+
- Docker Compose 2.0+
- 至少 1GB 可用内存
- 至少 2GB 可用磁盘空间

### 📦 首次部署步骤

1. **下载部署包**
   ```bash
   # 创建项目目录
   mkdir word-xinghuidian
   cd word-xinghuidian
   
   # 将部署包文件复制到此目录
   ```

2. **配置环境变量**
   ```bash
   # 复制并编辑环境变量
   cp .env.example .env
   nano .env
   ```
   
   **必须配置的参数：**
   ```env
   # 模型加密密钥（请修改为随机字符串）
   MODEL_ENCRYPTION_KEY=change-this-to-random-string
   ```
   
   **可选配置：**
   ```env
   # 千问 AI API Key（如需使用AI功能）
   QIANWEN_API_KEY=sk-your-api-key-here
   ```

3. **创建数据目录**
   ```bash
   mkdir -p backend/data backend/uploads
   ```

4. **启动服务**
   ```bash
   # 给脚本添加执行权限
   chmod +x update.sh
   
   # 拉取镜像并启动
   docker-compose pull
   docker-compose up -d
   ```

5. **验证部署**
   ```bash
   # 检查服务状态
   docker-compose ps
   
   # 检查健康状态
   curl http://localhost:3003/api/health
   ```

6. **访问应用**
   - 在浏览器打开：http://你的服务器IP:3000

### 🔄 更新应用

当有新版本发布时：

```bash
# 更新到最新版本
./update.sh

# 或更新到指定版本
./update.sh v1.2.0
```

### 📊 常用管理命令

```bash
# 查看服务状态
docker-compose ps

# 查看日志
docker-compose logs -f

# 停止服务
docker-compose down

# 重启服务
docker-compose restart

# 备份数据
tar -czf backup-$(date +%Y%m%d).tar.gz backend/
```

### 🔧 故障排除

**端口占用问题：**
```bash
# 检查端口占用
netstat -tulpn | grep :3000
netstat -tulpn | grep :3003

# 修改端口（编辑 docker-compose.yml）
```

**服务启动失败：**
```bash
# 查看详细日志
docker-compose logs backend
docker-compose logs frontend
```

**镜像拉取失败：**
```bash
# 手动拉取镜像
docker pull xieyifanxyf/word-xinghuidian-backend:latest
docker pull xieyifanxyf/word-xinghuidian-frontend:latest
```

### 📞 技术支持

如遇到问题，请提供以下信息：
- 系统版本：`uname -a`
- Docker版本：`docker --version`
- 服务状态：`docker-compose ps`
- 错误日志：`docker-compose logs`

---

**版本信息：**
- 镜像仓库：xieyifanxyf/word-xinghuidian-*
- 当前版本：v1.0.0
- 更新日期：2024-08-08