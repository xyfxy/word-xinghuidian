# Wordæ–°æ±‡ç‚¹ - å®¢æˆ·éƒ¨ç½²åŒ…

## ğŸš€ å¿«é€Ÿéƒ¨ç½²æŒ‡å—

è¿™ä¸ªéƒ¨ç½²åŒ…åŒ…å«äº†è¿è¡Œ Wordæ–°æ±‡ç‚¹ æ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ï¼Œæ— éœ€ä¸‹è½½å®Œæ•´æºä»£ç ã€‚

### ğŸ“‹ éƒ¨ç½²åŒ…å†…å®¹

```
å®¢æˆ·éƒ¨ç½²åŒ…/
â”œâ”€â”€ docker-compose.yml    # Docker ç¼–æ’æ–‡ä»¶
â”œâ”€â”€ .env.example         # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ update.sh           # æ›´æ–°è„šæœ¬
â””â”€â”€ éƒ¨ç½²è¯´æ˜.md          # æœ¬æ–‡æ¡£
```

### ğŸ› ï¸ ç³»ç»Ÿè¦æ±‚

- Docker 20.10+
- Docker Compose 2.0+
- è‡³å°‘ 1GB å¯ç”¨å†…å­˜
- è‡³å°‘ 2GB å¯ç”¨ç£ç›˜ç©ºé—´

### ğŸ“¦ é¦–æ¬¡éƒ¨ç½²æ­¥éª¤

1. **ä¸‹è½½éƒ¨ç½²åŒ…**

   ```bash
   # åˆ›å»ºé¡¹ç›®ç›®å½•
   mkdir word-xinghuidian
   cd word-xinghuidian

   # å°†éƒ¨ç½²åŒ…æ–‡ä»¶å¤åˆ¶åˆ°æ­¤ç›®å½•
   ```
2. **é…ç½®ç¯å¢ƒå˜é‡**

   ```bash
   # å¤åˆ¶å¹¶ç¼–è¾‘ç¯å¢ƒå˜é‡
   cp .env.example .env
   nano .env
   ```

   **å¿…é¡»é…ç½®çš„å‚æ•°ï¼š**

   ```env
   # é¡¹ç›®åç§°ï¼ˆDocker Composeä½¿ç”¨ï¼‰
   COMPOSE_PROJECT_NAME=word-xinghuidian
   
   # æ¨¡å‹åŠ å¯†å¯†é’¥ï¼ˆé‡è¦ï¼è¯·ä¿æŒä¸€è‡´ï¼Œå¦åˆ™æ— æ³•è§£å¯†å·²ä¿å­˜çš„æ¨¡å‹ï¼‰
   MODEL_ENCRYPTION_KEY=666888  # é»˜è®¤å€¼ï¼Œå»ºè®®ä¿®æ”¹ä¸ºè‡ªå·±çš„å¯†é’¥
   
   # ç‰ˆæœ¬é…ç½®
   VERSION=latest  # æˆ–æŒ‡å®šç‰ˆæœ¬å¦‚ v1.4.0
   ```
   
   **âš ï¸ é‡è¦æç¤ºï¼š**
   - `MODEL_ENCRYPTION_KEY` ä¸€æ—¦è®¾ç½®åä¸è¦ä¿®æ”¹ï¼Œå¦åˆ™å·²ä¿å­˜çš„AIæ¨¡å‹é…ç½®å°†æ— æ³•è§£å¯†
   - å¦‚æœè¿ç§»æœåŠ¡å™¨ï¼Œå¿…é¡»ä½¿ç”¨ç›¸åŒçš„åŠ å¯†å¯†é’¥
3. **åˆ›å»ºæ•°æ®ç›®å½•**

   ```bash
   mkdir -p backend/data backend/uploads
   ```
4. **å¯åŠ¨æœåŠ¡**

   ```bash
   # ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
   chmod +x update.sh

   # æ‹‰å–é•œåƒå¹¶å¯åŠ¨
   docker-compose pull
   docker-compose up -d
   ```
5. **éªŒè¯éƒ¨ç½²**

   ```bash
   # æ£€æŸ¥æœåŠ¡çŠ¶æ€
   docker-compose ps

   # æ£€æŸ¥å¥åº·çŠ¶æ€
   curl http://localhost:3003/api/health
   ```
6. **è®¿é—®åº”ç”¨**

   - åœ¨æµè§ˆå™¨æ‰“å¼€ï¼šhttp://ä½ çš„æœåŠ¡å™¨IP:3000

### ğŸ”„ æ›´æ–°åº”ç”¨

å½“æœ‰æ–°ç‰ˆæœ¬å‘å¸ƒæ—¶ï¼š

```bash
# æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
./update.sh

# æˆ–æ›´æ–°åˆ°æŒ‡å®šç‰ˆæœ¬
./update.sh v1.4.0
```

**âš ï¸ é‡è¦è¯´æ˜ï¼š**
- æ›´æ–°è¿‡ç¨‹ä¼šè‡ªåŠ¨å¤‡ä»½ç°æœ‰æ•°æ®åˆ° `backup-æ—¥æœŸæ—¶é—´` ç›®å½•
- **ä¸ä¼šè¦†ç›–ç°æœ‰çš„AIæ¨¡å‹é…ç½®å’Œæ¨¡æ¿æ•°æ®**
- å®¹å™¨åˆå§‹åŒ–è„šæœ¬ä¼šæ£€æµ‹å¹¶ä¿æŠ¤ç°æœ‰æ•°æ®ï¼š
  - å¦‚æœ `backend/data/models/` ç›®å½•å·²æœ‰æ¨¡å‹é…ç½®ï¼Œä¸ä¼šè¦†ç›–
  - å¦‚æœ `backend/data/templates/` ç›®å½•å·²æœ‰æ¨¡æ¿ï¼Œä¸ä¼šè¦†ç›–
  - åªæœ‰åœ¨ç›®å½•ä¸ºç©ºæ—¶æ‰ä¼šå¤åˆ¶é¢„è®¾æ•°æ®

### ğŸ“Š å¸¸ç”¨ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down

# é‡å¯æœåŠ¡
docker-compose restart

# å¤‡ä»½æ•°æ®
tar -czf backup-$(date +%Y%m%d).tar.gz backend/
```

### ğŸ”§ æ•…éšœæ’é™¤

**æ•°æ®åŠ è½½å¤±è´¥é—®é¢˜ï¼ˆé‡è¦ï¼‰ï¼š**

å¦‚æœé‡åˆ°"æ¨¡æ¿æˆ–æ¨¡å‹åŠ è½½å¤±è´¥"çš„é”™è¯¯ï¼š

```bash
# æ–¹æ³•1ï¼šé‡å¯åç«¯æœåŠ¡ï¼ˆé€šå¸¸èƒ½è§£å†³ï¼‰
docker-compose restart backend

# æ–¹æ³•2ï¼šæ£€æŸ¥æ•°æ®ç›®å½•çŠ¶æ€
docker exec word-xinghuidian-backend ls -la /app/data/

# æ–¹æ³•3ï¼šæ‰‹åŠ¨è§¦å‘æ•°æ®æ¢å¤
docker exec word-xinghuidian-backend sh -c "cp -r /app/preset-data/* /app/data/"
docker-compose restart backend

# æ–¹æ³•4ï¼šä½¿ç”¨æ›´æ–°è„šæœ¬çš„è‡ªåŠ¨ä¿®å¤åŠŸèƒ½
./update.sh
```

**ç«¯å£å ç”¨é—®é¢˜ï¼š**

```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tulpn | grep :3000
netstat -tulpn | grep :3003

# ä¿®æ”¹ç«¯å£ï¼ˆç¼–è¾‘ docker-compose.ymlï¼‰
```

**æœåŠ¡å¯åŠ¨å¤±è´¥ï¼š**

```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker-compose logs backend
docker-compose logs frontend

# æ£€æŸ¥å¥åº·çŠ¶æ€
curl http://localhost:3003/api/health
```

**é•œåƒæ‹‰å–å¤±è´¥ï¼š**

```bash
# æ‰‹åŠ¨æ‹‰å–é•œåƒ
docker pull xieyifanxyf/word-xinghuidian-backend:latest
docker pull xieyifanxyf/word-xinghuidian-frontend:latest
```

### ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

- ç³»ç»Ÿç‰ˆæœ¬ï¼š`uname -a`
- Dockerç‰ˆæœ¬ï¼š`docker --version`
- æœåŠ¡çŠ¶æ€ï¼š`docker-compose ps`
- é”™è¯¯æ—¥å¿—ï¼š`docker-compose logs`

---

**ç‰ˆæœ¬ä¿¡æ¯ï¼š**

- é•œåƒä»“åº“ï¼šxieyifanxyf/word-xinghuidian-*
- å½“å‰ç‰ˆæœ¬ï¼šv1.4.0
- æ›´æ–°æ—¥æœŸï¼š2025-08-09
